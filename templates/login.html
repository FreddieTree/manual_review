{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% block content %}
<h2 class="mb-4 text-lg font-bold">Login</h2>
<form method="post" class="space-y-4 max-w-md bg-white p-6 rounded border shadow">
    <label for="name" class="block font-semibold">Name:</label>
    <input type="text" name="name" required class="border px-2 py-1 rounded w-full mb-2">

    <label for="email_prefix" class="block font-semibold">Email:</label>
    <div class="flex items-center">
        <input type="text" name="email_prefix" id="email_prefix" pattern="^[a-zA-Z0-9._%+-]+$" required
            class="border px-2 py-1 rounded w-2/3" placeholder="yourid">
        <span class="ml-1 text-gray-600">@bristol.ac.uk</span>
    </div>
    <input type="hidden" name="email" id="full_email">
    <button type="submit" class="mt-4 w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">
        Login
    </button>
</form>
<script>
    // 自动组合全邮箱
    document.querySelector("form").addEventListener("submit", function (e) {
        const prefix = document.getElementById("email_prefix").value.trim();
        document.getElementById("full_email").value = prefix + "@bristol.ac.uk";
    });
</script>
{% endblock %}